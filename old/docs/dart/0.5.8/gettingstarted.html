<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Getting started · Cloudstate Dart</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content='docs'/>
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,400,400i,700,700i&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>

<!-- OneTrust Cookies Consent Notice start -->
<script type="text/javascript">
(function(w,d,s){if(w.location.protocol!="file:"){var f=d.getElementsByTagName(s)[0],j=d.createElement(s);
j.async=true;j.src="https://cdn.cookielaw.org/consent/a14b53db-7715-45da-be81-7fd0cafc385d.js";
j.charset="UTF-8";f.parentNode.insertBefore(j,f);}})(window,document,"script");</script>
<!-- OneTrust Cookies Consent Notice end -->

<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-2">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WWL9BXX');</script>
<!-- End Google Tag Manager -->

<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<script type="text/javascript" src="js/warnOldVersion.js"></script>
<script type="text/javascript" src="js/groups.js"></script>
<link rel="stylesheet" type="text/css" href="lib/foundation/dist/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="css/page.css"/>

<link rel="icon" type="image/x-icon" href="../../../favicon.ico">
</head>

<body>
<div class="off-canvas-wrapper">
<div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

<div class="off-canvas position-left" id="off-canvas-menu" data-off-canvas>
<nav class="off-canvas-nav">
<div class="nav-home">
<a href="index.html" >
Cloudstate Dart
</a>
</div>
<div class="nav-version">
Version 0.5.8
</div>
<div class="nav-toc">
<ul>
  <li><a href="gettingstarted.html" class="active page">Getting started</a></li>
  <li><a href="eventsourced.html" class="page">Event sourcing</a></li>
  <li><a href="stateless.html" class="page">Stateless Functions</a></li>
  <li><a href="crdt.html" class="page">CRDT</a></li>
  <li><a href="examples.html" class="page">Examples</a></li>
  <li><a href="serialization.html" class="page">Serialization</a></li>
</ul>
</div>

</nav>
</div>

<div class="off-canvas-content" data-off-canvas-content>
<div id="lightbend-banner" class="lightbend-banner cloudstate full-width" data-category="OSS Lightbend Banner Impression" data-label="Cloudstate Banner Impression">
<div class="wrapper">
<div class="brand">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Lightbend Logo - Cloudstate Banner" href="https://www.lightbend.com?r=oss-banner-cloudstate" target="_blank">
<img class="lightbend-logo" src="images/banner-logos/lightbend-reverse.svg" alt="Lightbend" title="Lightbend">
</a>
</div>
<div class="nav">
<a class="banner-btn oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Enhance your Cloudstate app with Lightbend [Button] - Cloudstate Banner" href="https://www.lightbend.com/cloudstate-by-lightbend?r=oss-banner-cloudstate" target="_blank">
<span>Enhance your Cloudstate app with</span>
<img class="lightbend-logo" src="images/banner-logos/lightbend-reverse.svg" alt="Lightbend" title="Lightbend">
</a>
<div class="drop-down">
<svg class="svg-chevon-circle-down" version="1.1" id="Chevron_circled_down" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve">
<path fill="#ffffff" d="M12.505,8.698L10,11L7.494,8.698c-0.198-0.196-0.518-0.196-0.718,0c-0.197,0.196-0.197,0.515,0,0.71l2.864,2.807
c0.199,0.196,0.52,0.196,0.717,0l2.864-2.807c0.199-0.195,0.198-0.514,0-0.71C13.024,8.502,12.704,8.502,12.505,8.698z M10,0.4
c-5.302,0-9.6,4.298-9.6,9.6c0,5.303,4.298,9.6,9.6,9.6s9.6-4.297,9.6-9.6C19.6,4.698,15.302,0.4,10,0.4z M10,18.354
c-4.615,0-8.354-3.74-8.354-8.354c0-4.614,3.739-8.354,8.354-8.354c4.613,0,8.354,3.74,8.354,8.354
C18.354,14.614,14.613,18.354,10,18.354z" />
</svg>
<div class="drop-down-content">
<div class="lightbend-family">
<a href="https://akka.io" class="akka oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Akka - Logo Tag Line - Cloudstate Banner">
<img class="akka-full-color-logo" src="images/banner-logos/akka-full-color.svg" alt="Akka by Lightbend" title="Akka by Lightbend">
</a>
<a href="https://cloudflow.io" class="cloudflow oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Cloudflow - Logo Tag Line - Cloudstate Banner">
<img class="cloudflow-full-color-logo" src="images/banner-logos/cloudflow-full-color.svg" alt="Cloudflow by Lightbend" title="Cloudflow by Lightbend">
</a>
<a href="https://www.lagomframework.com" class="lagom oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Lagom - Logo Tag Line - Cloudstate Banner">
<img class="lagom-full-color-logo" src="images/banner-logos/lagom-full-color.svg" alt="Lagom Framework by Lightbend" title="Lagom Framework by Lightbend">
</a>
<a href="https://www.playframework.com" class="play oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Play - Logo Tag Line - Cloudstate Banner">
<img class="play-full-color-logo" src="images/banner-logos/play-full-color.svg" alt="Play Framework by Lightbend" title="Play Framework by Lightbend">
</a>
<a href="https://www.scala-lang.org" class="scala oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Scala - Logo Tag Line - Cloudstate Banner">
<img class="scala-full-color-logo" src="images/banner-logos/scala-full-color.svg" alt="Scala by Lightbend" title="Scala by Lightbend">
</a>
<div class="cloudstate current">
<img class="cloudstate-full-color-logo" src="images/banner-logos/cloudstate-full-color.svg" alt="Cloudstate by Lightbend" title="Cloudstate by Lightbend">
<span>From the creators of <strong>Cloudstate</strong>, get developer assistance and expert support from Lightbend.</span>
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Learn More [Button] - Cloudstate Banner" href="https://www.lightbend.com/cloudstate-by-lightbend?r=oss-banner-cloudstate" target="_blank">Learn More</a>
</div>
</div>
<div class="title">The Lightbend Family</div>
</div>      
</div>
</div>
</div>
</div>

<header class="site-header expanded row">
<div class="small-12 column">
<a href="#" class="off-canvas-toggle hide-for-medium" data-toggle="off-canvas-menu"><svg class="svg-icon svg-icon-menu" version="1.1" id="Menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"> <path class="svg-icon-menu-path" fill="#53CDEC" d="M16.4,9H3.6C3.048,9,3,9.447,3,10c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,9.447,16.952,9,16.4,9z M16.4,13
H3.6C3.048,13,3,13.447,3,14c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,13.447,16.952,13,16.4,13z M3.6,7H16.4
C16.952,7,17,6.553,17,6c0-0.553-0.048-1-0.6-1H3.6C3.048,5,3,5.447,3,6C3,6.553,3.048,7,3.6,7z"/></svg>
</a>
<div class="title"><a href="../../.."><img src="images/cloudstate-horizontal-white.svg" alt="Cloudstate Dart"/></a></div>
</div>
</header>

<div class="expanded row">

<div class="medium-3 large-2 show-for-medium column site-nav-container">
<nav class="site-nav">
<div class="nav-home">
<a href="index.html" >
Cloudstate Dart
</a>
</div>
<div class="nav-version">
Version 0.5.8
</div>
<div class="nav-toc">
<ul>
  <li><a href="gettingstarted.html" class="active page">Getting started</a></li>
  <li><a href="eventsourced.html" class="page">Event sourcing</a></li>
  <li><a href="stateless.html" class="page">Stateless Functions</a></li>
  <li><a href="crdt.html" class="page">CRDT</a></li>
  <li><a href="examples.html" class="page">Examples</a></li>
  <li><a href="serialization.html" class="page">Serialization</a></li>
</ul>
</div>

</nav>
</div>

<div class="small-12 medium-9 large-10 column">
<section class="site-content">

<span id="version-warning"></span>

<div class="page-header row">
<div class="medium-12 show-for-medium column">
<div class="nav-breadcrumbs">
<ul>
  <li><a href="index.html">Cloudstate Dart</a></li>
  <li>Getting started</li>
</ul>
</div>
</div>
</div>

<div class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h1><a href="#getting-started" name="getting-started" class="anchor"><span class="anchor-link"></span></a>Getting started</h1>
<h2><a href="#prerequisites" name="prerequisites" class="anchor"><span class="anchor-link"></span></a>Prerequisites</h2>
<h3><a href="#dart-version" name="dart-version" class="anchor"><span class="anchor-link"></span></a>Dart version</h3>
<p>Cloudstate Dart support requires Dart sdk &gt;=2.7.0 &lt;3.0.0.</p>
<h3><a href="#build-tool" name="build-tool" class="anchor"><span class="anchor-link"></span></a>Build tool</h3>
<p>Use Dart <a href="https://dart.dev/tools/pub/cmd">Pub</a> tool for build Cloudstate Dart projects.</p>
<h3><a href="#protoc" name="protoc" class="anchor"><span class="anchor-link"></span></a>Protoc</h3>
<p>Since Cloudstate is based on gRPC, you need a protoc compiler to compile gRPC protobuf descriptors. While this can be done by downloading, <a href="https://github.com/protocolbuffers/protobuf#user-content-protocol-compiler-installation">installing and running protoc manually</a>. You will also need to add a plugin to compile the proto files for Dart classes.</p>
<pre class="prettyprint"><code class="language-shell script">pub global activate protoc_plugin
</code></pre>
<p>The compiler plugin, protoc-gen-dart, is installed in <code>$HOME/.pub-cache/bin</code>. It must be in your PATH for the protocol compiler, protoc, to find it.</p>
<pre class="prettyprint"><code class="language-shell script">export PATH=$PATH:$HOME/.pub-cache/bin
</code></pre>
<h3><a href="#docker" name="docker" class="anchor"><span class="anchor-link"></span></a>Docker</h3>
<p>Cloudstate runs in Kubernetes with <a href="https://www.docker.com/">Docker</a>, hence you will need Docker to build a container that you can deploy to Kubernetes. Below is a Dockerfile file with Dart support:</p>
<pre class="prettyprint"><code class="language-shell script">FROM google/dart

WORKDIR /app

ADD pubspec.yaml /app/
RUN pub get
ADD . /app
RUN pub get --offline
RUN dart --snapshot-kind=kernel --snapshot=bin/main.dart.snapshot bin/main.dart

CMD []
ENTRYPOINT [&quot;/usr/bin/dart&quot;, &quot;--enable-asserts&quot;,  &quot;--enable-vm-service:8181&quot;, &quot;bin/main.dart.snapshot&quot;]
</code></pre>
<p>In addition to the above, you will need to install the Cloudstate Dart support library, which can be done as follows:</p>
<pre class="prettyprint"><code class="language-yaml">dependencies:
  cloudstate: ^0.5.8
  async: ^2.2.0
  grpc: ^2.1.3
  protobuf: ^1.0.1
</code></pre>
<h2><a href="#protobuf-files" name="protobuf-files" class="anchor"><span class="anchor-link"></span></a>Protobuf files</h2>
<p>You will need to create a folder to store the .proto definition files for your project. Create a folder called <code>protos</code> at the root of your project.</p>
<p>So, if you were to build the example shopping cart application shown earlier in <a href="https://cloudstate.io/docs/core/current/user/features/grpc.html">gRPC descriptors</a> and assuming you created a project called shopping_cart, you could simply paste that protobuf into <code>shopping_cart/protos/shoppingcart.proto</code>.</p>
<p>Now run <code>protoc</code> in the root folder of your project to generate Dart files:</p>
<pre class="prettyprint"><code class="language-shell script">protoc --include_imports \
     --descriptor_set_out=user-function.desc \
     -I protos/persistence/domain.proto protos/shoppingcart.proto \
     --dart_out=grpc:lib/src/generated
</code></pre><div class="callout note "><div class="callout-title">Important</div>
<p>Using the <code>descriptor_set_out = user-function.desc</code> option exactly as presented is mandatory since the Dart library will look for the <code>user-function.desc</code> file at the root of your project during the startup phase.</p></div>
<h2><a href="#creating-a-main-function" name="creating-a-main-function" class="anchor"><span class="anchor-link"></span></a>Creating a main function</h2>
<p>Your main class will be responsible for creating the Cloudstate gRPC server, registering the entities for your placement and starting it. To do this, you can use the <code>Cloudstate</code> class server builder, for example, in the <code>bin/</code> folder create a file called <code>main.dart</code> with the following content:</p>
<pre class="prettyprint"><code class="language-dart">import &#39;package:cloudstate/cloudstate.dart&#39;;
import &#39;package:shopping_cart/src/eventsourced_entity.dart&#39;;

void main() {
    Cloudstate()
        ..port = 8080
        ..address = &#39;localhost&#39;
        ..registerEventSourcedEntity(
            &#39;com.example.shoppingcart.ShoppingCart&#39;, ShoppingCartEntity)
        ..start();
}</code></pre>
<p>We will see more details on registering entities in the coming pages.</p>
<div class="nav-next">
<p><strong>Next:</strong> <a href="eventsourced.html">Event sourcing</a></p>
</div>
</div>
<div class="large-3 show-for-large column" data-sticky-container>
<nav class="sidebar sticky" data-sticky data-anchor="docs" data-sticky-on="large">
<div class="page-nav">
<div class="nav-title">On this page:</div>
<div class="nav-toc">
<ul>
  <li><a href="gettingstarted.html#getting-started" class="header">Getting started</a>
  <ul>
    <li><a href="gettingstarted.html#prerequisites" class="header">Prerequisites</a>
    <ul>
      <li><a href="gettingstarted.html#dart-version" class="header">Dart version</a></li>
      <li><a href="gettingstarted.html#build-tool" class="header">Build tool</a></li>
      <li><a href="gettingstarted.html#protoc" class="header">Protoc</a></li>
      <li><a href="gettingstarted.html#docker" class="header">Docker</a></li>
    </ul></li>
    <li><a href="gettingstarted.html#protobuf-files" class="header">Protobuf files</a></li>
    <li><a href="gettingstarted.html#creating-a-main-function" class="header">Creating a main function</a></li>
  </ul></li>
</ul>
</div>
</div>
</nav>
</div>
</div>

</section>
</div>

</div>

<footer class="site-footer">

<a href="../../.."><img src="images/cloudstate-stacked-white.svg"></a>
<p>© Cloudstate <script>document.write(new Date().getFullYear());</script> | <a href="../../../privacy/">Privacy Policy</a> | <a class="optanon-toggle-display">Cookie Settings</a></p>

</footer>

</div>
</div>
</div>
</body>

<script type="text/javascript" src="lib/foundation/dist/foundation.min.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="js/magellan.js"></script>

<style type="text/css">@import "lib/prettify/prettify.css";</style>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>


</html>
